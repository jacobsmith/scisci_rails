<% 
  note_list = []

  if @source
    note_list = @source.notes
  elsif @project
    note_list = @project.notes
  elsif @note
    note_list = @note.source.notes
  elsif @tags
    @tags.each do |tag|
      note_list.push(tag.note)
    end
  end
%>

<% if note_list %>

  <ul class="note-list" data-notelist>
    <% note_list.each do |note| %>
      <li class="note-list__item">
        <div class="note">
          <p class="note__comments"><%= truncate(note.comments, :length => 100, :omission => '...') %></p>
          <p class="note__quote"><%= truncate(note.quote, :length => 100, :omission => '...') %></p>
          <p><%= link_to "Read full note Â»", note_path(note) %></p>
          <p class="note__tags"><%= tag_list(note) %></p>
        </div>
      </li>
    <% end %>
  </ul>

<% else %>

    <div>
      <p>Hmm...you don't seem to have anything here yet. Click the button below to get started!</p>
      <% if @project && @project.sources != [] %>
        <p class="button radius side"><%= link_to "Select a source", project_sources_path(@project) %></p>
      <% elsif @source %>
        <p class="button radius side"><%= link_to "Add a note!", new_source_note_path(@source) %></p>
      <% end %>
    </div>

<% end %>
