<%
def nav_link(title, path, controller, action)
  content_tag( :li, class: ('active' if params[:controller] === controller and params[:action] === action) ) do
    link_to title, path
  end
end
%>

<% if 'projects sources notes tags'.include? controller_name %>
  <% @project ||= @source.try(:project) || @note.try(:source).try(:project) || @tag.try(:project) %>
  <% @source  ||= @project.try(:sources).try(:first) || @note.try(:source) || @tag.try(:note).try(:source) %>
  <!-- need to see what happens when no source, etc. --> 

  <%= nav_link("Overview", project_path(@project), "projects", "show") if @project && @project.id != nil %>
  <%= nav_link("Sources", project_sources_path(@project), "sources", "index") if @project && @project.id != nil %>
  <%= nav_link("Notes", project_notes_path(@project), "notes", "project_index") if @project && @project.id != nil %>
<% end %>
